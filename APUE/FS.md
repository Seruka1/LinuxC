# æ–‡ä»¶ç³»ç»Ÿ

## ç›®æ ‡

å®ä¾‹ï¼šç±»lsçš„å®ç°,å¦‚myls -l -a -i -n

## ä¸€ã€ç›®å½•å’Œæ–‡ä»¶

### 1. è·å–æ–‡ä»¶å±æ€§

- stat é€šè¿‡æ–‡ä»¶è·¯å¾„è·å–å±æ€§
- fstat é€šè¿‡æ–‡ä»¶æè¿°ç¬¦è·å–å±æ€§
- lstat é¢å¯¹ç¬¦å·é“¾æ¥æ–‡ä»¶æ—¶ï¼Œè·å–çš„æ˜¯ç¬¦å·ğŸ”—æ–‡ä»¶lçš„å±æ€§,è€Œstatè·å–çš„æ˜¯é“¾æ¥å¯¹è±¡çš„å±æ€§
- æ³¨æ„ï¼šåœ¨unixä¸­æ–‡ä»¶å¤§å° `size`åªæ˜¯ä¸€ä¸ªå±æ€§ï¼Œä¸ä¸€å®šä»£è¡¨æ–‡ä»¶çœŸæ­£çš„å¤§å°(ä¸æ–‡ä»¶ç³»ç»Ÿç›¸å…³)

### 2. æ–‡ä»¶è®¿é—®æƒé™

st_modeï¼ˆrwxr--r--ï¼‰æ€»å…±16ä½ï¼Œç”¨äºè¡¨ç¤ºæ–‡ä»¶ç±»å‹ã€æ–‡ä»¶è®¿é—®æƒé™ã€ç‰¹æ®Šæƒé™ä½ï¼ˆç²˜ä½ä½ã€ç»„ç”¨æˆ·è®¾ç½®ä½ï¼‰

- æ–‡ä»¶ç±»å‹ dcb-lspï¼ˆ7ç§æ–‡ä»¶ç±»å‹ï¼Œç”¨3ä½è¡¨ç¤ºï¼‰
  - ç›®å½•æ–‡ä»¶
  - å­—ç¬¦è®¾å¤‡æ–‡ä»¶
  - å—è®¾å¤‡æ–‡ä»¶
  - å¸¸è§„æ–‡ä»¶
  - ç¬¦å·é“¾æ¥æ–‡ä»¶
  - å¥—æ¥å­—æ–‡ä»¶
  - åŒ¿åç®¡é“æ–‡ä»¶

### 3. umask

  ä½œç”¨ï¼šé˜²æ­¢äº§ç”Ÿæƒé™è¿‡æ¾çš„æ–‡ä»¶

### 4. æ–‡ä»¶æƒé™çš„æ›´æ”¹/ç®¡ç†

  åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­æƒ³è¦è¿è¡Œä¸€ä¸ªè„šæœ¬ï¼Œé‚£ä¹ˆå¯èƒ½éœ€è¦æ”¹å˜æ–‡ä»¶çš„æƒé™

- chmod

  - chmod a+x ??x ??x ??x
  - chmod u+x ??x ??? ???
  - chmod g+x ??? ??x ???
  - chmod o+x ??? ??? ??x
- fchmod

### 5. ç²˜ä½ä½

  tä½ï¼šç›®å‰ä¸€èˆ¬ç”¨äºç›®å½•çš„è®¾ç½®ï¼Œ**åªæœ‰å¯¹è¯¥ç›®å½•å…·æœ‰å†™æƒé™çš„ç”¨æˆ·å¹¶ä¸”æ»¡è¶³ä¸‹åˆ—æ¡ä»¶ä¹‹ä¸€**ï¼Œæ‰å¯ä»¥åˆ é™¤æˆ–è€…é‡å‘½åè¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼š

- æ‹¥æœ‰æ­¤æ–‡ä»¶
- æ‹¥æœ‰æ­¤ç›®å½•
- æ˜¯è¶…çº§ç”¨æˆ·

### 6. æ–‡ä»¶ç³»ç»Ÿï¼šFAT,UFS

  æ–‡ä»¶æˆ–æ•°æ®çš„å­˜å‚¨å’Œç®¡ç†

### 7. ç¡¬é“¾æ¥ï¼Œç¬¦å·é“¾æ¥

- link (å‘½ä»¤) åˆ›å»ºç¡¬é“¾æ¥å…¶å®å°±æ˜¯åœ¨ç›®å½•é¡¹ä¸­æ·»åŠ ä¸€æ¡æ˜ å°„ï¼Œå­˜åœ¨é™åˆ¶ï¼šä¸èƒ½ç»™åˆ†åŒºå»ºç«‹ï¼Œä¸èƒ½ç»™ç›®å½•å»ºç«‹ã€‚ç¬¦å·é“¾æ¥ä¼˜ç‚¹ï¼šå¯è·¨åˆ†åŒºï¼Œå¯ä»¥ç»™ç›®å½•å»ºç«‹ã€‚
- ln() => ln
- unlink() åˆ é™¤ä¸€ä¸ªæ–‡ä»¶çš„ç¡¬è¿æ¥ ä½†å¹¶ä¸æ˜¯åˆ é™¤æ–‡ä»¶ åªæœ‰å½“ä¸€ä¸ªæ–‡ä»¶çš„ç¡¬é“¾æ¥æ•°ä¸º0 ä¸”æ²¡æœ‰è¿›ç¨‹å ç”¨è¯¥æ–‡ä»¶æ—¶ä¸€ä¸ªæ–‡ä»¶æ‰æœ‰è¢«åˆ é™¤çš„å¯èƒ½ï¼ˆæ•°æ®å¯è¢«éšæ„æ”¹å†™ï¼‰

### 8. utime

  å¯ä»¥æ›´æ”¹æ–‡ä»¶æœ€åè¯»çš„æ—¶é—´å’Œæ”¹çš„æ—¶é—´ã€‚

### 9. ç›®å½•çš„åˆ›å»ºä¸é”€æ¯

- mkdir
- rmdir

### 10. æ›´æ”¹å½“å‰å·¥ä½œç›®å½•

- chdir
- fchdir

### 11. åˆ†æç›®å½•/è¯»å–ç›®å½•å†…å®¹

**å•ç‹¬è°ƒç”¨**

- globè§£ææ¨¡å¼/é€šé…ç¬¦ï¼ˆ*ï¼‰

**ç»„åˆè°ƒç”¨**

- opendir()
- closedir()
- readdir()
- seekdir()
- telldir()

## äºŒã€ç³»ç»Ÿæ•°æ®æ–‡ä»¶å’Œä¿¡æ¯

1. /etc/passwd

   - getpwuid();
   - getpwnam();
2. /etc/group

   - getgrgid();
   - getgrgrnam();
3. /etc/shadow

   - getspnam();
   - crypt();
   - getpass();
   - å¯†ç åŠ ç›
4. æ—¶é—´æˆ³
   **time_t=>struct_tm=>char***

- time() ä»kernelä¸­å–å‡ºæ—¶é—´æˆ³(ä»¥ç§’ä¸ºå•ä½)
- gntime() å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºstruct_tm æ ¼æ—å¨æ²»æ—¶é—´
- localtime() å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºstruct_tm æœ¬åœ°æ—¶é—´
- mktime() jaing struct_tmç»“æ„ä½“è½¬æ¢ä¸ºæ—¶é—´æˆ³ï¼Œè¿˜å¯ä»¥æ£€æŸ¥æ˜¯å¦æº¢å‡º
- strftime(); æ ¼å¼åŒ–æ—¶é—´å­—ç¬¦ä¸²
  ```
  time_t stamp;
  time(&stamp);
  stamp = time(NULL);
  tm = localtime(&stamp);
  strftime(buf,BUFSIZE,"%Y-%m-%d",tm);
  puts(buf);
  ```
- tail -f å¾ªç¯è¯»å–æ–‡ä»¶

## ä¸‰ã€è¿›ç¨‹ç¯å¢ƒ

1. mainå‡½æ•°

- `int main(int argc,char** argv)`

2. è¿›ç¨‹çš„ç»ˆæ­¢ï¼š

- æ­£å¸¸ç»ˆæ­¢ï¼š
  - ä»mainå‡½æ•°è¿”å›
  - è°ƒç”¨ `exit`
  - è°ƒç”¨ `_exit`æˆ–è€… `_Exit`ï¼Œ**è°ƒç”¨_exit/_Exitç›´æ¥è¿”å›å†…æ ¸  ä¸æ‰§è¡Œé’©å­å‡½æ•°ä»¥åŠæ¸…ç†ç¼“å†²åŒº**
  - æœ€åä¸€ä¸ªçº¿ç¨‹ä»å…¶å¯åŠ¨ä¾‹ç¨‹è¿”å›
  - æœ€åä¸€ä¸ªçº¿ç¨‹è°ƒç”¨ `pthread_exit`
- å¼‚å¸¸ç»ˆæ­¢ï¼š
  - è°ƒç”¨abort
  - æ¥åˆ°ä¸€ä¸ªä¿¡å·å¹¶ç»ˆæ­¢
  - æœ€åä¸€ä¸ªçº¿ç¨‹å¯¹å…¶å–æ¶ˆè¯·æ±‚ä½œå‡ºå“åº”
- é’©å­å‡½æ•° `atexit()`
  å½“æ‰§è¡Œexitæ—¶ï¼Œé€†åºè°ƒç”¨æ³¨å†Œçš„é’©å­å‡½æ•°ã€‚

3. å‘½ä»¤è¡Œå‚æ•°çš„åˆ†æ

- `getopt()`
- `getopt_long()`

4. ç¯å¢ƒå˜é‡**KEY==VALUE**
   - Linux exportå‘½ä»¤æŸ¥çœ‹ç¯å¢ƒå˜é‡
   - `getenv()`
   - `setenv()`
   - `putenv()`
5. Cç¨‹åºçš„å­˜å‚¨ç©ºé—´å¸ƒå±€`pmap(1)`
6. åº“

- åŠ¨æ€åº“
- é™æ€åº“
- æ‰‹å·¥è£…è½½åº“
  - `dlopen`
  - `dlclose`
  - `dlerror`
  - `dlsym`

7. å‡½æ•°è·³è½¬

```
é€‚ç”¨åœºæ™¯ï¼š åœ¨æ ‘ç»“æ„ä¸­æŸ¥æ‰¾å…ƒç´ ï¼Œæ‰¾åˆ°åç›´æ¥å›åˆ°ç¬¬ä¸€æ¬¡è°ƒç”¨å¤„(è·¨å‡½æ•°),ä¸ç”¨ä¸€å±‚ä¸€å±‚è¿”å›
```

- `setjmp`
- `longjmp`

8. èµ„æºçš„è·å–ä¸æ§åˆ¶

- getrlimit
- setrlimit
- ulimit
